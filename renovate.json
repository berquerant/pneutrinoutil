{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "baseBranches": ["main"],
  "extends": [
    "github>berquerant/renovate-config"
  ],
  "postUpdateOptions": ["gomodTidy"],
  "lockFileMaintenance": {
    "enabled": true
  },
  "github-actions": {
    "enabled": false
  },
  "packageRules": [
    {
      "description": "Group docker dependencies",
      "groupName": "docker({{updateType}}): {{depName}}",
      "addLabels": ["docker"],
      "matchDatasources": ["docker"]
    },
    {
      "description": "Group go dependencies",
      "groupName": "go({{updateType}}) in {{#if packageFileDir}}{{packageFileDir}}{{else}}root{{/if}}",
      "addLabels": ["go"],
      "matchDatasources": ["go"]
    }
  ],
  "customManagers":[
    {
      "description": "Manage mysql version",
      "customType": "regex",
      "fileMatch": ["^.github/.env$"],
      "matchStrings": ["MYSQL_VERSION=(?<currentValue>\\d+\\.\\d+\\.\\d+)"],
      "datasourceTemplate": "docker",
      "depNameTemplate": "mysql"
    },
    {
      "description": "Manage redis version",
      "customType": "regex",
      "fileMatch": ["^.github/.env$"],
      "matchStrings": ["REDIS_VERSION=(?<currentValue>\\d+\\.\\d+\\.\\d+)"],
      "datasourceTemplate": "docker",
      "depNameTemplate": "redis"
    },
    {
      "description": "Manage minio version",
      "customType": "regex",
      "fileMatch": ["^.github/.env$"],
      "matchStrings": ["MINIO_VERSION=(?<currentValue>RELEASE\\..+Z)"],
      "datasourceTemplate": "docker",
      "depNameTemplate": "quay.io/minio/minio"
    },
    {
      "description": "Manage golangci-lint version",
      "customType": "regex",
      "fileMatch": ["^.github/.env$"],
      "matchStrings":["GOLANGCI_LINT_VERSION=(?<currentValue>v\\d+\\.\\d+\\.\\d+)"],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "golangci/golangci-lint"
    },
    {
      "description": "Manage go-arch-lint version",
      "customType": "regex",
      "fileMatch": ["^.github/.env$"],
      "matchStrings":["GO_ARCH_LINT_VERSION=(?<currentValue>v\\d+\\.\\d+\\.\\d+)"],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "fe3dback/go-arch-lint"
    },
    {
      "description": "Manage shellcheck version",
      "customType": "regex",
      "fileMatch": ["^.github/.env$"],
      "matchStrings":["SHELLCHECK_VERSION=(?<currentValue>v\\d+\\.\\d+\\.\\d+)"],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "koalaman/shellcheck"
    },
    {
      "description": "Manage ls-lint version",
      "customType": "regex",
      "fileMatch": ["^.github/.env$"],
      "matchStrings":["LS_LINT_VERSION=(?<currentValue>v\\d+\\.\\d+\\.\\d+)"],
      "datasourceTemplate": "github-releases",
      "depNameTemplate": "loeffel-io/ls-lint"
    }
  ]
}
